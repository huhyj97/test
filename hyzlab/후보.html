<!doctype html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>허유진/01050923865</title>
  <link rel="stylesheet" href="css/default.css">
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.2.0/anime.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.4.2/gsap.min.js"></script>

  <style>
    /*-------------------- Body --------------------*/
    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    :root {
      --ease: cubic-bezier(0.29, 0.57, 0.12, 0.99);
      --duration: 0.6s;
      --size: 800px;
      --scaleMask: 1;
      --scaleBtn: 1;
    }

    @media (max-width: 900px) {
      :root {
        --size: 600px;
        --scaleMask: 0.75;
        --scaleBtn: 0.8;
      }
    }

    @media (max-width: 700px) {
      :root {
        --size: 400px;
        --scaleMask: 0.5;
        --scaleBtn: 0.7;
      }
    }

    @media (max-width: 500px) {
      :root {
        --size: 300px;
        --scaleMask: 0.375;
        --scaleBtn: 0.6;
      }
    }

    body {
      margin: 0;
      background: #fff;
      color: #84b7b2;
      font-size: 14px;
      font-family: 'Roboto', sans-serif;
    }

    main {
      display: flex;
      padding: 5%;
    }

    .carousel {
      position: relative;
      z-index: 1;
      width: var(--size);
      height: var(--size);
    }

    .carousel svg {
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      fill: #e8f5e4;
      pointer-events: none;
    }

    .carousel svg #mask {
      transform: scale(var(--scaleMask));
    }

    .carousel--images {
      position: absolute;
      z-index: 2;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-clip-path: url(#mask);
      clip-path: url(#mask);
      overflow: hidden;
    }

    .carousel img {
      position: absolute;
      z-index: 2;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: opacity var(--duration) var(--ease), transform var(--duration) var(--ease);
      opacity: 0;
      transform: scale(0.9) translateZ(0);
    }

    .carousel img.active {
      transform: scale(1) translateZ(0);
      opacity: 1;
    }
  </style>
</head>

<body>

  <header>
    <svg viewBox="0 0 100 80" class="im-a-hamburger">
      <rect width="100" height="10"></rect>
      <rect y="30" width="80" height="10"></rect>
      <rect y="60" width="60" height="10"></rect>
    </svg>

    <div class="navigation">
      <div class="overlay"></div>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080" id="navigation-background">
        <path class="a morph-path"
          d="M1694.17,69.11c-21.15,46.26-57.31,104.06-118,123-36,11.22-57.7,1.67-115-2-89.29-5.71-118,12.26-213,21-104.64,9.63-124.51-7.14-234-8-98.87-.77-238-1.86-366,60-154.3,74.55-131.59,162.75-270,216-133.46,51.34-315.11,31.11-364-60-39.85-74.25,18.49-176.94,35-206C234-112.21,1335,19.57,1694.17,69.11Z" />
      </svg>
      <nav>
        <ul>
          <li data-item="home"><a href="#0">Home</a></li>
          <li data-item="about"><a href="#0">Portfolio</a></li>
          <li data-item="contact"><a href="#0">Profile</a></li>
          <li data-item="dance"><a href="#0">Contact me</a></li>
        </ul>
      </nav>
    </div>
  </header>


  <main>
    <div class="carousel">
      <svg id="blob-1" viewbox="0 0 800 800">
        <defs>
          <clipPath id="mask">
            <path id="path-1" />
          </clipPath>
        </defs>
        <path id="path-2" />
      </svg>
      <div class="carousel--images">
        <img src="images/profile1.jpg" class="active" />
      </div>
    </div>

    <div class="profile-txt">
      <h1>"도태되지 않기 위해</h1>
      <h1>도전하는 태도를 가진 허유진입니다!"</h1>

      <div class="profile-info">
        <ul>
          <li>NAME/ 허유진</li>
          <li><a href="mailto:huhyj97@naver.com">MAIL/ huhyj97@naver.com</li>
          <li><a href="https://velog.io/@huhyj97">BLOG/ https://velog.io/@huhyj97</li>
        </ul>

        <button>이력서(PDF)</button>
      </div>
    </div>
  </main>

  <script>
    "use strict";

    /*--------------------
    SupahBlob
    --------------------*/
    class SupahBlob {
      constructor(obj) {
        if (!obj.el) return;
        this.el = obj.el;
        this.segments = obj.segments || 8;
        this.centerX = obj.centerX || 400;
        this.centerY = obj.centerY || 400;
        this.minRadius = obj.minRadius || 300;
        this.maxRadius = obj.maxRadius || 380;
        this.minDuration = obj.minDuration || 1;
        this.maxDuration = obj.maxDuration || 2;
        this.maskEl = obj.maskEl || null;
        this.maskID = obj.maskID || null;
        this.init();
      }

      init() {
        this.points = [];
        const slice = Math.PI * 2 / this.segments;
        const tl = new gsap.timeline({
          onUpdate: () => {
            this.update();
          }
        });

        for (let i = 0; i < this.segments; i++) {
          const angle = slice * i;
          const duration = gsap.utils.random(this.minDuration, this.maxDuration);
          const p = {
            x: this.centerX + Math.cos(angle) * this.minRadius,
            y: this.centerX + Math.sin(angle) * this.minRadius
          };
          const tween = gsap.to(p, {
            duration,
            x: this.centerX + Math.cos(angle) * this.maxRadius,
            y: this.centerX + Math.sin(angle) * this.maxRadius,
            ease: 'sine.inOut',
            repeat: -1,
            yoyo: true
          });
          tl.add(tween, -duration);
          this.points.push(p);
        }
      }

      update() {
        this.el.setAttribute('d', this.createPath()); // Force clipPath update

        if (this.maskEl) {
          this.maskEl.style.clipPath = 'none';
          this.maskEl.style.webkitClipPath = 'none';
          this.maskEl.offsetWidth;
          this.maskEl.style.clipPath = `url("${this.maskID}")`;
          this.maskEl.style.webkitClipPath = `url("${this.maskID}")`;
        }
      }

      createPath() {
        const data = this.points;
        const size = this.points.length;
        let path = `M${data[0].x} ${data[0].y} C`;

        for (let i = 0; i < size; i++) {
          const p0 = data[(i - 1 + size) % size];
          const p1 = data[i];
          const p2 = data[(i + 1) % size];
          const p3 = data[(i + 2) % size];
          const x1 = p1.x + (p2.x - p0.x) * 0.15;
          const y1 = p1.y + (p2.y - p0.y) * 0.15;
          const x2 = p2.x - (p3.x - p1.x) * 0.15;
          const y2 = p2.y - (p3.y - p1.y) * 0.15;
          path += ` ${x1} ${y1} ${x2} ${y2} ${p2.x} ${p2.y}`;
        }

        return `${path}z`;
      }

    }
    /*--------------------
    Blob Mask
    --------------------*/


    const blob1 = new SupahBlob({
      el: document.querySelector('#path-1'),
      segments: 9,
      centerX: 400,
      centerY: 400,
      minRadius: 300,
      maxRadius: 380,
      minDuration: 1,
      maxDuration: 3,
      maskEl: document.querySelector('.carousel--images'),
      maskID: '#mask'
    });
    /*--------------------
    Blob Background
    --------------------*/

    const blob2 = new SupahBlob({
      el: document.querySelector('#path-2'),
      segments: 9,
      centerX: 400,
      centerY: 400,
      minRadius: 320,
      maxRadius: 400,
      minDuration: 2,
      maxDuration: 3
    });

    //물결모양 nav
    let shapes = [{
        d: "M1694.17,69.11c-21.15,46.26-57.31,104.06-118,123-36,11.22-57.7,1.67-115-2-89.29-5.71-118,12.26-213,21-104.64,9.63-124.51-7.14-234-8-98.87-.77-238-1.86-366,60-154.3,74.55-131.59,162.75-270,216-133.46,51.34-315.11,31.11-364-60-39.85-74.25,18.49-176.94,35-206C234-112.21,1335,19.57,1694.17,69.11Z"
      },
      {
        d: "M1737.24,215.24c-34.74,37.5-67.35,51.35-91,57-57.8,13.8-91.82-14.3-144,6-33.08,12.86-45.33,34.24-67,56-70.1,70.36-173.64,79.18-242,85-177.57,15.11-211.26-83.88-316-64-186.56,35.39-153.7,363.51-372,456-142.82,60.5-344.26-.55-439-129-108-146.45-65.7-364.73,4-474C255.28-81.85,922.75-57.54,1737.24,215.24Z"
      },
      {
        d: "M2103.58,312.15c-177.1,79.56-276.61,94.56-336,90-5.83-.45-22.23-1.93-45-2,0,0-102.23-.34-186,31-132.83,49.68-105.49,192.42-235,261-99.66,52.76-150.92-13.18-271,25-135.26,43-179.58,161.4-273,288-150.43,203.84-432.33,434.57-571,387-193.12-66.25-291.42-735-15-1087C478.21-85.35,1271.73-118.86,2103.58,312.15Z"
      }
    ]

    var morph = anime({
      targets: '.morph-path',
      d: [{
          value: shapes[0].d
        },
        {
          value: shapes[2].d
        }
      ],
      delay: 0,
      duration: 1200,
      autoplay: false,
      loop: false,
      complete: (anim) => {
        console.log(anim.reversed);
        if (anim.reversed) {
          document.querySelector(".navigation").classList.toggle("open");
          morph.completed = false;
          morph.progress = 0;
          morph.reverse();
        } else {
          document.querySelector(".navigation nav").classList.toggle("open")
          document.querySelectorAll(".navigation nav ul li").forEach((el) => {
            const pageColor = {
              "home": "rgba(111, 125, 143, 1.0)",
              "about": "hsla(185,37%,35%,0.65)",
              "contact": "hsla(319,99%,21%,0.65)",
              "dance": "hsla(170,100%,35%,0.65)"
            }
            el.addEventListener("mouseover", (e) => {
              document.querySelector(".morph-path").style.fill = pageColor[el.getAttribute("data-item")];
            })

            el.addEventListener("click", (e) => {
              document.querySelector(".navigation nav").classList.toggle("open");
              document.querySelector(".navigation").classList.toggle("open");
              morph.reverse();
            })
          })
        }
      }
    });

    //hamburger
    document.querySelector(".im-a-hamburger").addEventListener("click", (e) => {
      if (!document.querySelector(".navigation").classList.contains("open")) {
        document.querySelector(".navigation").classList.toggle("open")
        morph.play();
      } else {
        document.querySelector(".navigation nav").classList.toggle("open");
        morph.completed = false;
        morph.progress = 0;
        morph.reverse();
        morph.play();
      }
    })
  </script>
</body>

</html>
